!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){class n{constructor(e,t){this.cardElement=this.create(e,t),this.cardElement.querySelector(".place-card__like-icon").addEventListener("click",this.like),this.cardElement.querySelector(".place-card__delete-icon").addEventListener("click",this.remove)}like(e){e.target.classList.contains("place-card__like-icon")&&e.target.classList.toggle("place-card__like-icon_liked")}remove(e){e.target.closest(".place-card").remove()}create(e,t){const n=document.createElement("div");n.classList.add("place-card");const o=document.createElement("div");o.classList.add("place-card__image"),o.style.backgroundImage=`url(${t})`;const s=document.createElement("div");s.classList.add("place-card__description");const a=document.createElement("h3");a.classList.add("place-card__name"),a.textContent=e;const r=document.createElement("button");r.classList.add("place-card__delete-icon");const l=document.createElement("button");return l.classList.add("place-card__like-icon"),n.appendChild(o),o.appendChild(r),n.appendChild(s),s.appendChild(a),s.appendChild(l),n}}class o{constructor(e,t){this.container=e,this.cards=t,this.render()}addCard(e,t){const{cardElement:o}=new n(e,t);this.container.appendChild(o)}render(){this.cards.forEach(e=>{this.addCard(e.name,e.link)})}}class s{constructor(e,t){this.popupElem=e,this.button=t,this.open=this.open.bind(this),this.close=this.close.bind(this),this.popupElem.querySelector(".popup__close").addEventListener("click",this.close),this.button.addEventListener("click",this.open)}open(){this.popupElem.classList.add("popup_is-opened")}close(){this.popupElem.classList.remove("popup_is-opened")}}const a=document.querySelector(".root"),r=a.querySelector(".places-list"),l=a.querySelector(".popup-newplace"),i=document.querySelector(".popup-profile"),c=(document.querySelectorAll(".popup"),a.querySelector(".user-info__button")),u=(document.querySelectorAll(".popup__close"),document.querySelector(".place-card__like-icon"),document.querySelector(".plus-button")),d=document.querySelector(".user-info__edit-button"),p=document.querySelector(".save-button"),m=a.querySelector(".user-info__name"),b=a.querySelector(".user-info__job"),h=a.querySelector(".user-info__photo"),v=document.forms.edit,f=v.elements.person,y=document.querySelector(".input-error_field-top"),L=document.querySelector(".input-error_symbols-top"),_=v.elements.about,g=document.querySelector(".input-error_field-bottom"),S=document.querySelector(".input-error_symbols-bottom"),E=document.forms.new,k=new s(l,c),q=new s(i,d),C=a.querySelector(".popup-big"),j=new class{constructor(e,t){this.baseUrl=e,this.auth=t}getCards(){return fetch(`${this.baseUrl}cards`,{headers:{authorization:this.auth,"Content-Type":"application/json"}}).then(e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`))}getProfile(){return fetch(`${this.baseUrl}users/me`,{headers:{authorization:this.auth,"Content-Type":"application/json"}}).then(e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`))}updateProfile(e,t){return fetch(`${this.baseUrl}users/me`,{method:"PATCH",headers:{authorization:this.auth,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then(e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`))}saveCard(e,t){return fetch(`${this.baseUrl}cards`,{method:"POST",headers:{authorization:this.auth,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then(e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`))}changeAvatar(e){return fetch(`${this.baseUrl}users/me/avatar`,{method:"PATCH",headers:{authorization:this.auth,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then(e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`))}}("http://95.216.175.5/cohort3/","c01b9357-4aba-4abb-8c3d-32a2a5face4c"),A=a.querySelector(".user-info__photo"),P=a.querySelector(".popup-avatar"),w=new s(P,A),O=document.forms.avatar,T=O.elements.ava_link,x=a.querySelector(".ava-save-button");let $;j.getCards().then(e=>{$=new o(r,e)}).catch(e=>console.log(e)),j.getProfile().then(e=>{m.textContent=e.name,b.textContent=e.about,h.setAttribute("src",e.avatar)}).catch(e=>{console.log(e)}),x.addEventListener("click",(function(e){e.preventDefault(),j.changeAvatar(T.value).then(()=>{h.setAttribute("src",T.value),w.close(),O.reset()})})),T.addEventListener("input",(function(){0===T.value.length?(x.classList.remove("button-enabled"),x.setAttribute("disabled",!0)):(x.classList.add("button-enabled"),x.removeAttribute("disabled"))})),A.addEventListener("click",(function(){x.classList.remove("button-enabled"),x.setAttribute("disabled",!0)})),c.addEventListener("click",(function(){u.setAttribute("disabled",!0),u.classList.remove("button-enabled")})),d.addEventListener("click",(function(){const e=m.innerHTML,t=b.innerHTML,n=document.forms.edit;let o=n.elements.person,s=n.elements.about;o.value=e,s.value=t,p.classList.add("button-enabled"),y.classList.remove("fields-top-open"),g.classList.remove("fields-bottom-open"),S.classList.remove("symbols-bottom-open"),L.classList.remove("symbols-top-open")})),document.forms.new.addEventListener("submit",(function(e){e.preventDefault();const t=document.forms.new,n=t.elements.name,o=t.elements.link;j.saveCard(n.value,o.value).then(()=>{$.addCard(n.value,o.value),k.close(),t.reset()}).catch(e=>{console.log(e)})})),document.forms.edit.addEventListener("submit",(function(e){e.preventDefault();const t=document.forms.edit,n=t.elements.person,o=t.elements.about;j.updateProfile(n.value,o.value).then(()=>{!function(e,t){m.textContent=e,b.textContent=t}(n.value,o.value),q.close(),t.reset()}).catch(e=>{console.log(e)})})),r.addEventListener("click",(function(e){e.stopPropagation();const{target:t}=e;if(t.classList.contains("place-card__image")){const e=document.querySelector(".place-card__image");new s(C,e).open();const n=t.style.backgroundImage,o=a.querySelector(".popup-image"),r=n.slice(n.indexOf("url")+5,-2);o.setAttribute("src",r)}})),v.addEventListener("input",(function(){f.value.length<2||_.value.length<2||f.value.length>30||_.value.length>30?(p.classList.remove("button-enabled"),p.setAttribute("disabled",!0)):(p.removeAttribute("disabled"),p.classList.add("button-enabled"))})),f.addEventListener("input",(function(){0===f.value.length?(p.classList.remove("button-enabled"),p.setAttribute("disabled",!0),y.classList.add("fields-top-open")):(y.classList.remove("fields-top-open"),p.removeAttribute("disabled"),p.classList.add("button-enabled"))})),f.addEventListener("input",(function(){f.value.length<2||f.value.length>30?L.classList.add("symbols-top-open"):L.classList.remove("symbols-top-open")})),_.addEventListener("input",(function(){0===_.value.length?(p.classList.remove("button-enabled"),p.setAttribute("disabled",!0),g.classList.add("fields-bottom-open")):(p.classList.add("button-enabled"),p.removeAttribute("disabled"),g.classList.remove("fields-bottom-open"))})),_.addEventListener("input",(function(){_.value.length<2||_.value.length>30?S.classList.add("symbols-bottom-open"):S.classList.remove("symbols-bottom-open")})),E.addEventListener("input",(function(){const e=E.elements.name,t=E.elements.link;e.value.length>1&&t.value.length>1?(u.classList.add("button-enabled"),u.removeAttribute("disabled")):(u.setAttribute("disabled",!0),u.classList.remove("button-enabled"))})),console.log("Hello, World!")}]);